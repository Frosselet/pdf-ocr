# Data Contract: ACEA â€” European New Car Registrations
#
# Pivoted table normalization from press release PDF.
# Dense hierarchical headers with 28 countries x 7 power types x 3 metrics
# unpivoted into flat records.

provider: acea_car_registrations
description: European new car registrations by market and power source

model: openai/gpt-4o
source_format: pdf

# --- Table classification rules ---
categories:
  registrations:
    keywords:
      - registration
      - market
      - power source
      - battery
      - electric
      - hybrid
      - petrol
      - diesel
      - country
      - monthly

# --- Output table definitions ---
outputs:
  registrations_by_market:
    category: registrations
    filename: car_registrations.parquet
    schema:
      description: New car registrations unpivoted by country and power source
      columns:
        - name: country
          type: string
          description: Country or regional aggregate
          aliases: []
          format: titlecase
        - name: car_motorization
          type: string
          description: Vehicle power source category
          aliases: [battery electric, plug-in hybrid, hybrid electric, others, petrol, diesel]
          format: titlecase
        - name: new_car_registration
          type: int
          description: Number of new car registrations in the period
          aliases: []
          format: "#,###"
        - name: date
          type: string
          description: "Registration period (YYYY-MM from column header year and document context month)"
          aliases: []
          format: YYYY-MM
